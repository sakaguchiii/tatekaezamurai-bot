# ğŸ’¡ å€‹åˆ¥ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ - ã‚¢ã‚¤ãƒ‡ã‚¢é›†

**ä½œæˆæ—¥**: 2026å¹´1æœˆ25æ—¥

---

## ğŸ¯ ç¾çŠ¶

ç¾åœ¨ã®æ¸…ç®—ãã‚“Botã¯**ã‚°ãƒ«ãƒ¼ãƒ—å°‚ç”¨**ï¼š

```typescript
// commandHandler.ts:26-36
if (source.type !== 'group') {
  await client.replyMessage({
    replyToken,
    messages: [{
      type: 'text',
      text: 'âš ï¸ ã‚°ãƒ«ãƒ¼ãƒ—å°‚ç”¨ã§ã™',
    }],
  });
  return;
}
```

å€‹åˆ¥ãƒãƒ£ãƒƒãƒˆã§ã¯ä½•ã‚‚ã§ãã¾ã›ã‚“ã€‚

---

## ğŸ’¡ å€‹åˆ¥ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®ã‚¢ã‚¤ãƒ‡ã‚¢

### ğŸŒŸ å„ªå…ˆåº¦1: ã™ãå®Ÿè£…ã§ãã¦ä¾¡å€¤ãŒé«˜ã„

#### 1. éå»ã®æ¸…ç®—å±¥æ­´ç¢ºèª â­â­â­â­â­

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**:
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªåˆ†ã®éå»ã®æ¸…ç®—å±¥æ­´ã‚’ç¢ºèªã§ãã‚‹

**ä½¿ã„æ–¹**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: å±¥æ­´

Bot:
ğŸ“Š ã‚ãªãŸã®æ¸…ç®—å±¥æ­´

ğŸ—“ï¸ 2026å¹´1æœˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1/23 é£²ã¿ä¼šã‚°ãƒ«ãƒ¼ãƒ—
  æ”¯æ‰•: 5,000å††
  å—å–: 2,000å††

1/18 ç ”ç©¶å®¤ãƒ¡ãƒ³ãƒãƒ¼
  æ”¯æ‰•: 3,000å††
  å—å–: 1,500å††

ğŸ’° ä»Šæœˆã®åˆè¨ˆ
  æ”¯æ‰•: 8,000å††
  å—å–: 3,500å††
  å·®é¡: -4,500å††
```

**å®Ÿè£…é›£æ˜“åº¦**: ğŸŸ¢ ç°¡å˜
- æ—¢å­˜ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰æŠ½å‡ºã™ã‚‹ã ã‘
- `SELECT * FROM sessions WHERE data LIKE '%userId%'`

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… è‡ªåˆ†ãŒã„ãã‚‰ä½¿ã£ãŸã‹ä¸€ç›®ã§åˆ†ã‹ã‚‹
- âœ… ã‚°ãƒ«ãƒ¼ãƒ—ã§ã®æ¸…ç®—ã‚’å¿˜ã‚Œã¦ã„ãªã„ã‹ç¢ºèªã§ãã‚‹
- âœ… æœˆæ¬¡ã®é£²ã¿ä¼šä»£ã‚’æŠŠæ¡ã§ãã‚‹

---

#### 2. å€‹äººæ”¯å‡ºè¨˜éŒ²ï¼ˆç°¡æ˜“å®¶è¨ˆç°¿ï¼‰ â­â­â­â­â­

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**:
å€‹äººã§æ—¥ã€…ã®æ”¯å‡ºã‚’è¨˜éŒ²ã€‚ã‚°ãƒ«ãƒ¼ãƒ—ã¨ã¯åˆ¥ã«å€‹äººã®æ”¯å‡ºã‚’ç®¡ç†ã€‚

**ä½¿ã„æ–¹**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ãƒ©ãƒ³ãƒ 800

Bot: âœ… ãƒ©ãƒ³ãƒ 800å†† è¨˜éŒ²ã—ã¾ã—ãŸ

ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã‚³ãƒ³ãƒ“ãƒ‹ 350

Bot: âœ… ã‚³ãƒ³ãƒ“ãƒ‹ 350å†† è¨˜éŒ²ã—ã¾ã—ãŸ

ãƒ¦ãƒ¼ã‚¶ãƒ¼: ä»Šæ—¥

Bot:
ğŸ“… ä»Šæ—¥ã®æ”¯å‡º

ãƒ©ãƒ³ãƒ: 800å††
ã‚³ãƒ³ãƒ“ãƒ‹: 350å††
â”â”â”â”â”â”â”â”â”
åˆè¨ˆ: 1,150å††

ãƒ¦ãƒ¼ã‚¶ãƒ¼: ä»Šæœˆ

Bot:
ğŸ“Š 1æœˆã®æ”¯å‡º

é£Ÿè²»: 15,000å††
äº¤é€šè²»: 5,000å††
å¨¯æ¥½: 8,000å††
ãã®ä»–: 2,000å††
â”â”â”â”â”â”â”â”â”
åˆè¨ˆ: 30,000å††
```

**å®Ÿè£…é›£æ˜“åº¦**: ğŸŸ¡ ä¸­ç¨‹åº¦
- æ–°ã—ã„ãƒ†ãƒ¼ãƒ–ãƒ« `personal_expenses` ãŒå¿…è¦
- ã‚«ãƒ†ã‚´ãƒªåˆ†é¡ã®ä»•çµ„ã¿
- æ—¥æ¬¡ãƒ»æœˆæ¬¡é›†è¨ˆ

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… å€‹äººã®æ”¯å‡ºç®¡ç†ãŒã§ãã‚‹
- âœ… ã‚°ãƒ«ãƒ¼ãƒ—æ¸…ç®—ã¨å€‹äººæ”¯å‡ºã‚’ä¸€ã¤ã®Botã§ç®¡ç†
- âœ… å®¶è¨ˆç°¿ã‚¢ãƒ—ãƒªã¨ã—ã¦ç‹¬ç«‹ã—ãŸä¾¡å€¤

**ãƒ‡ãƒ¼ã‚¿æ§‹é€ **:
```typescript
interface PersonalExpense {
  id: string;
  userId: string;
  label: string;
  amount: number;
  category: string;  // é£Ÿè²»ã€äº¤é€šè²»ã€å¨¯æ¥½ãªã©
  timestamp: string;
  memo?: string;
}
```

---

#### 3. çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½ â­â­â­â­

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**:
è‡ªåˆ†ã®æ”¯å‡ºå‚¾å‘ã‚’åˆ†æãƒ»å¯è¦–åŒ–

**ä½¿ã„æ–¹**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: çµ±è¨ˆ

Bot:
ğŸ“Š ã‚ãªãŸã®çµ±è¨ˆ (éå»3ãƒ¶æœˆ)

ğŸ’° ã‚°ãƒ«ãƒ¼ãƒ—æ¸…ç®—
  å‚åŠ å›æ•°: 12å›
  å¹³å‡æ”¯å‡º: 4,500å††/å›
  ç·æ”¯å‡º: 54,000å††

ğŸº ã‚ˆãè¡Œãç›¸æ‰‹
  1ä½: ç”°ä¸­ã•ã‚“ (6å›)
  2ä½: ä½è—¤ã•ã‚“ (4å›)
  3ä½: éˆ´æœ¨ã•ã‚“ (2å›)

ğŸ“… æ›œæ—¥åˆ¥
  é‡‘æ›œæ—¥: 5å› (æœ€å¤š)
  åœŸæ›œæ—¥: 4å›
  æœ¨æ›œæ—¥: 3å›

ğŸ’¡ ã‚¤ãƒ³ã‚µã‚¤ãƒˆ
  - é‡‘æ›œæ—¥ã®é£²ã¿ä¼šãŒå¤šã„ã§ã™
  - å¹³å‡æ”¯å‡ºã¯4,500å††ã§ã™
  - æœˆã®é£²ã¿ä¼šä»£: ç´„18,000å††
```

**å®Ÿè£…é›£æ˜“åº¦**: ğŸŸ¡ ä¸­ç¨‹åº¦
- ãƒ‡ãƒ¼ã‚¿é›†è¨ˆãƒ»åˆ†æãƒ­ã‚¸ãƒƒã‚¯
- ã‚°ãƒ©ãƒ•ç”Ÿæˆï¼ˆFlex Messageã§è¡¨ç¾ï¼‰

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… è‡ªåˆ†ã®æ”¯å‡ºãƒ‘ã‚¿ãƒ¼ãƒ³ãŒè¦‹ãˆã‚‹
- âœ… ç¯€ç´„æ„è­˜ãŒé«˜ã¾ã‚‹
- âœ… é¢ç™½ã„ç™ºè¦‹ãŒã‚ã‚‹

---

### ğŸŒŸ å„ªå…ˆåº¦2: ä¾¡å€¤ã¯é«˜ã„ãŒå®Ÿè£…ãŒè¤‡é›‘

#### 4. äºˆç®—ç®¡ç†ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ â­â­â­â­

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**:
æœˆæ¬¡äºˆç®—ã‚’è¨­å®šã—ã€è¶…éã—ãã†ãªæ™‚ã«ã‚¢ãƒ©ãƒ¼ãƒˆ

**ä½¿ã„æ–¹**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: äºˆç®—è¨­å®š é£²ã¿ä¼š 20000

Bot: âœ… é£²ã¿ä¼šã®æœˆæ¬¡äºˆç®—ã‚’20,000å††ã«è¨­å®šã—ã¾ã—ãŸ

ï¼ˆå¾Œæ—¥ã€18,000å††ä½¿ã£ãŸæ™‚ç‚¹ã§ï¼‰

Bot:
âš ï¸ äºˆç®—ã‚¢ãƒ©ãƒ¼ãƒˆ

é£²ã¿ä¼š: 18,000å†† / 20,000å††
æ®‹ã‚Š: 2,000å††

ä»Šæœˆã‚ã¨1å›ã§äºˆç®—ã‚ªãƒ¼ãƒãƒ¼ã§ã™ï¼
```

**å®Ÿè£…é›£æ˜“åº¦**: ğŸ”´ ã‚„ã‚„é«˜ã„
- äºˆç®—è¨­å®šã®ä¿å­˜
- å®šæœŸçš„ãªãƒã‚§ãƒƒã‚¯ãƒ»é€šçŸ¥
- Push APIã®æ´»ç”¨

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… ä½¿ã„ã™ãé˜²æ­¢
- âœ… è¨ˆç”»çš„ãªæ”¯å‡ºç®¡ç†

---

#### 5. ãƒ¬ã‚·ãƒ¼ãƒˆç®¡ç† â­â­â­

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**:
ãƒ¬ã‚·ãƒ¼ãƒˆå†™çœŸã‚’é€ã‚‹ã¨ä¿å­˜ãƒ»è¨˜éŒ²

**ä½¿ã„æ–¹**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ï¼ˆãƒ¬ã‚·ãƒ¼ãƒˆå†™çœŸã‚’é€ä¿¡ï¼‰

Bot:
ğŸ“¸ ãƒ¬ã‚·ãƒ¼ãƒˆä¿å­˜ã—ã¾ã—ãŸ

é‡‘é¡: 1,200å††
æ—¥ä»˜: 2026/01/25
ã‚«ãƒ†ã‚´ãƒª: é£Ÿè²»

ã€Œãƒ¡ãƒ¢è¿½åŠ ã€ã§ãƒ¡ãƒ¢ã‚’è¿½åŠ ã§ãã¾ã™
```

**å®Ÿè£…é›£æ˜“åº¦**: ğŸ”´ é«˜ã„
- ç”»åƒä¿å­˜
- OCRå‡¦ç†ï¼ˆå°†æ¥çš„ã«ï¼‰
- ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç®¡ç†

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… ãƒ¬ã‚·ãƒ¼ãƒˆã‚’ãƒ‡ã‚¸ã‚¿ãƒ«ä¿ç®¡
- âœ… ç´›å¤±é˜²æ­¢
- âœ… ç¢ºå®šç”³å‘Šã®æº–å‚™

---

#### 6. æ”¯æ‰•ã„ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ â­â­â­

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**:
æœªæ¸…ç®—ã®é‡‘é¡ã‚’ãƒªãƒã‚¤ãƒ³ãƒ‰

**ä½¿ã„æ–¹**:
```
ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ã§æ¸…ç®—ãŒå®Œäº†ã—ãŸç¿Œæ—¥ï¼‰

Bot:
ğŸ’° æ”¯æ‰•ã„ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼

æ˜¨æ—¥ã®æ¸…ç®—ã§ä»¥ä¸‹ã®æ”¯æ‰•ã„ãŒã‚ã‚Šã¾ã™ï¼š

ç”°ä¸­ã•ã‚“ã¸: 2,000å††
ä½è—¤ã•ã‚“ã¸: 1,500å††

æ”¯æ‰•ã„å®Œäº†ã—ãŸã‚‰ã€Œå®Œäº†ã€ã¨é€ä¿¡ã—ã¦ãã ã•ã„
```

**å®Ÿè£…é›£æ˜“åº¦**: ğŸ”´ ã‚„ã‚„é«˜ã„
- å®šæœŸçš„ãªé€šçŸ¥
- æ”¯æ‰•ã„çŠ¶æ…‹ã®ç®¡ç†

**ãƒ¡ãƒªãƒƒãƒˆ**:
- âœ… æ”¯æ‰•ã„å¿˜ã‚Œé˜²æ­¢
- âœ… ã‚°ãƒ«ãƒ¼ãƒ—ãƒ¡ãƒ³ãƒãƒ¼ã¨ã®ãƒˆãƒ©ãƒ–ãƒ«å›é¿

---

### ğŸŒŸ å„ªå…ˆåº¦3: å°†æ¥çš„ãªã‚¢ã‚¤ãƒ‡ã‚¢

#### 7. ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆãƒ»æ‹›å¾… â­â­

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**:
å€‹åˆ¥ãƒãƒ£ãƒƒãƒˆã‹ã‚‰æ–°ã—ã„ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆãƒ»ãƒ¡ãƒ³ãƒãƒ¼æ‹›å¾…

**ä½¿ã„æ–¹**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã‚°ãƒ«ãƒ¼ãƒ—ä½œæˆ é£²ã¿ä¼šãƒ¡ãƒ³ãƒãƒ¼

Bot:
ğŸ“ ã‚°ãƒ«ãƒ¼ãƒ—ã€Œé£²ã¿ä¼šãƒ¡ãƒ³ãƒãƒ¼ã€ã‚’ä½œæˆã—ã¾ã™ã‹ï¼Ÿ

æ‹›å¾…ã™ã‚‹ãƒ¡ãƒ³ãƒãƒ¼ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼š
[ç”°ä¸­ã•ã‚“] [ä½è—¤ã•ã‚“] [éˆ´æœ¨ã•ã‚“]
```

**å®Ÿè£…é›£æ˜“åº¦**: ğŸ”´ é«˜ã„
- LINE Group API
- æ‹›å¾…ãƒªãƒ³ã‚¯ç”Ÿæˆ

---

#### 8. å‹é”ã¨ã®å€‹åˆ¥æ¸…ç®— â­â­â­

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**:
ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œã‚‰ãšã«ã€1å¯¾1ã§æ¸…ç®—

**ä½¿ã„æ–¹**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: æ¸…ç®— ç”°ä¸­ 5000

Bot:
ğŸ’° ç”°ä¸­ã•ã‚“ã¨ã®æ¸…ç®—

ã‚ãªãŸ: 5,000å††æ”¯æ‰•ã„
ç”°ä¸­ã•ã‚“: 5,000å††å—å–

ç”°ä¸­ã•ã‚“ã«é€šçŸ¥ã—ã¾ã—ãŸ
```

**å®Ÿè£…é›£æ˜“åº¦**: ğŸ”´ é«˜ã„
- å€‹åˆ¥ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã®ãƒ‡ãƒ¼ã‚¿é€£æº
- é€šçŸ¥æ©Ÿèƒ½

---

#### 9. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½ â­â­

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**:
ã‚ˆãè¡Œãåº—ã®é‡‘é¡ã‚’ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆåŒ–

**ä½¿ã„æ–¹**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¿½åŠ  å±…é…’å±‹A 4000

Bot: âœ… ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã€Œå±…é…’å±‹A: 4,000å††ã€ã‚’ä¿å­˜ã—ã¾ã—ãŸ

ï¼ˆæ¬¡å›ï¼‰
ãƒ¦ãƒ¼ã‚¶ãƒ¼: å±…é…’å±‹A

Bot: âœ… å±…é…’å±‹A 4,000å†† è¨˜éŒ²ã—ã¾ã—ãŸ
```

**å®Ÿè£…é›£æ˜“åº¦**: ğŸŸ¢ ç°¡å˜

---

#### 10. ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ â­â­â­â­

**ã‚³ãƒ³ã‚»ãƒ—ãƒˆ**:
ãƒ‡ãƒ¼ã‚¿ã‚’CSV/PDFã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**ä½¿ã„æ–¹**:
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼: ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ 2025å¹´

Bot:
ğŸ“Š 2025å¹´ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸ

[CSVãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰]
[PDFãƒ¬ãƒãƒ¼ãƒˆ]
```

**å®Ÿè£…é›£æ˜“åº¦**: ğŸŸ¡ ä¸­ç¨‹åº¦
- CSVç”Ÿæˆ
- PDFç”Ÿæˆ
- LINE APIã§ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡

---

## ğŸ“Š æ©Ÿèƒ½æ¯”è¼ƒãƒãƒˆãƒªã‚¯ã‚¹

| æ©Ÿèƒ½ | å„ªå…ˆåº¦ | å®Ÿè£…é›£æ˜“åº¦ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¾¡å€¤ | æ—¢å­˜æ©Ÿèƒ½æ´»ç”¨ |
|------|--------|-----------|------------|------------|
| éå»ã®æ¸…ç®—å±¥æ­´ | â­â­â­â­â­ | ğŸŸ¢ ç°¡å˜ | é«˜ | âœ… |
| å€‹äººæ”¯å‡ºè¨˜éŒ² | â­â­â­â­â­ | ğŸŸ¡ ä¸­ | éå¸¸ã«é«˜ | ğŸ”¶ |
| çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆ | â­â­â­â­ | ğŸŸ¡ ä¸­ | é«˜ | âœ… |
| äºˆç®—ç®¡ç† | â­â­â­â­ | ğŸ”´ é«˜ | é«˜ | ğŸ”¶ |
| ãƒ¬ã‚·ãƒ¼ãƒˆç®¡ç† | â­â­â­ | ğŸ”´ é«˜ | ä¸­ | âŒ |
| ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ | â­â­â­ | ğŸ”´ é«˜ | ä¸­ | âœ… |
| ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | â­â­â­â­ | ğŸŸ¡ ä¸­ | ä¸­ | âœ… |

---

## ğŸ¯ æ¨å¥¨å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: ã‚¯ã‚¤ãƒƒã‚¯ã‚¦ã‚£ãƒ³ï¼ˆ1-2é€±é–“ï¼‰

1. **éå»ã®æ¸…ç®—å±¥æ­´ç¢ºèª**
   - æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æ´»ç”¨
   - SQLã‚¯ã‚¨ãƒªã§æŠ½å‡º
   - ã‚·ãƒ³ãƒ—ãƒ«ãªè¡¨ç¤º

2. **åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰**
   - `å±¥æ­´`: éå»ã®æ¸…ç®—ä¸€è¦§
   - `çµ±è¨ˆ`: ç°¡æ˜“çµ±è¨ˆ
   - `ä»Šæœˆ`: ä»Šæœˆã®æ”¯å‡º

### Phase 2: ã‚³ã‚¢æ©Ÿèƒ½ï¼ˆ1-2ãƒ¶æœˆï¼‰

3. **å€‹äººæ”¯å‡ºè¨˜éŒ²**
   - æ–°ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
   - ã‚«ãƒ†ã‚´ãƒªåˆ†é¡
   - æ—¥æ¬¡ãƒ»æœˆæ¬¡é›†è¨ˆ

4. **çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆå¼·åŒ–**
   - ã‚°ãƒ©ãƒ•ç”Ÿæˆï¼ˆFlex Messageï¼‰
   - å‚¾å‘åˆ†æ
   - ã‚¤ãƒ³ã‚µã‚¤ãƒˆæç¤º

### Phase 3: é«˜åº¦æ©Ÿèƒ½ï¼ˆ2-3ãƒ¶æœˆï¼‰

5. **äºˆç®—ç®¡ç†**
   - äºˆç®—è¨­å®š
   - ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥
   - Push APIæ´»ç”¨

6. **ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ**
   - CSVç”Ÿæˆ
   - PDFãƒ¬ãƒãƒ¼ãƒˆ

---

## ğŸ’¡ å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

### 1. ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆ

**å€‹äººæ”¯å‡ºç”¨ãƒ†ãƒ¼ãƒ–ãƒ«**:
```sql
CREATE TABLE personal_expenses (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  label TEXT NOT NULL,
  amount INTEGER NOT NULL,
  category TEXT,
  memo TEXT,
  created_at TEXT NOT NULL,
  deleted_at TEXT
);

CREATE INDEX idx_personal_expenses_user_id ON personal_expenses(user_id);
CREATE INDEX idx_personal_expenses_created_at ON personal_expenses(created_at);
```

### 2. ã‚«ãƒ†ã‚´ãƒªè‡ªå‹•åˆ¤å®š

```typescript
function categorizeExpense(label: string): string {
  const keywords = {
    'é£Ÿè²»': ['ãƒ©ãƒ³ãƒ', 'ãƒ‡ã‚£ãƒŠãƒ¼', 'ã‚«ãƒ•ã‚§', 'ã‚³ãƒ³ãƒ“ãƒ‹', 'å±…é…’å±‹'],
    'äº¤é€šè²»': ['ã‚¿ã‚¯ã‚·ãƒ¼', 'ãƒã‚¹', 'é›»è»Š', 'Uber'],
    'å¨¯æ¥½': ['æ˜ ç”»', 'ã‚«ãƒ©ã‚ªã‚±', 'ã‚²ãƒ¼ãƒ '],
    // ...
  };

  for (const [category, words] of Object.entries(keywords)) {
    if (words.some(word => label.includes(word))) {
      return category;
    }
  }

  return 'ãã®ä»–';
}
```

### 3. ã‚³ãƒãƒ³ãƒ‰è¨­è¨ˆ

```typescript
// å€‹åˆ¥ãƒãƒ£ãƒƒãƒˆç”¨ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¼ã‚µãƒ¼
class PersonalCommandParser {
  static isHistoryCommand(text: string): boolean {
    return /^(å±¥æ­´|history)$/i.test(text);
  }

  static isStatsCommand(text: string): boolean {
    return /^(çµ±è¨ˆ|stats)$/i.test(text);
  }

  static isExpenseCommand(text: string): { label: string; amount: number } | null {
    const match = text.match(/^(.+?)\s+(\d+)/);
    if (match) {
      return {
        label: match[1],
        amount: parseInt(match[2], 10),
      };
    }
    return null;
  }
}
```

---

## ğŸš€ æœ€åˆã«å®Ÿè£…ã™ã¹ãæ©Ÿèƒ½

**æ¨å¥¨**: **éå»ã®æ¸…ç®—å±¥æ­´ç¢ºèª** + **å€‹äººæ”¯å‡ºè¨˜éŒ²**

**ç†ç”±**:
1. âœ… æ—¢å­˜æ©Ÿèƒ½ï¼ˆã‚°ãƒ«ãƒ¼ãƒ—æ¸…ç®—ï¼‰ã¨ã®ç›¸ä¹—åŠ¹æœ
2. âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¨ã£ã¦åˆ†ã‹ã‚Šã‚„ã™ã„
3. âœ… å®Ÿè£…ãŒæ¯”è¼ƒçš„ç°¡å˜
4. âœ… ç‹¬ç«‹ã—ãŸä¾¡å€¤ãŒã‚ã‚‹ï¼ˆå®¶è¨ˆç°¿ã¨ã—ã¦ä½¿ãˆã‚‹ï¼‰

**å®Ÿè£…ä¾‹**:
```typescript
if (source.type !== 'group') {
  // å€‹åˆ¥ãƒãƒ£ãƒƒãƒˆå‡¦ç†
  if (CommandParser.isHistoryCommand(text)) {
    await this.handlePersonalHistory(replyToken, userId);
  } else if (PersonalCommandParser.isExpenseCommand(text)) {
    await this.handlePersonalExpense(replyToken, userId, expenseData);
  } else {
    await this.handlePersonalHelp(replyToken);
  }
  return;
}
```

---

## ğŸ“ ã¾ã¨ã‚

| æ©Ÿèƒ½ | æ¨å¥¨åº¦ | ç†ç”± |
|------|--------|------|
| éå»ã®æ¸…ç®—å±¥æ­´ | â­â­â­â­â­ | ç°¡å˜ã§ä¾¡å€¤ãŒé«˜ã„ |
| å€‹äººæ”¯å‡ºè¨˜éŒ² | â­â­â­â­â­ | å®¶è¨ˆç°¿ã¨ã—ã¦ç‹¬ç«‹ã—ãŸä¾¡å€¤ |
| çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆ | â­â­â­â­ | ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ã§æº€è¶³åº¦å‘ä¸Š |

**æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**:
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ©Ÿèƒ½ã‚’ææ¡ˆ
2. ãƒ‹ãƒ¼ã‚ºã‚’ç¢ºèª
3. Phase 1ã‹ã‚‰å®Ÿè£…é–‹å§‹

å€‹åˆ¥ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€Botã®åˆ©ç”¨é »åº¦ãƒ»ä¾¡å€¤ãŒå¤§å¹…ã«å‘ä¸Šã—ã¾ã™ï¼
